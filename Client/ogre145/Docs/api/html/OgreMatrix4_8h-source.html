<html>
<head>
<title>OGRE: OgreMatrix4.h Source File - OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="doxygen.css">
<link type="text/css" rel="stylesheet" href="tabs.css">
</head>

<body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">OgreMain</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>OgreMatrix4.h</h1><a href="OgreMatrix4_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">-----------------------------------------------------------------------------</span>
00003 <span class="comment">This source file is part of OGRE</span>
00004 <span class="comment">    (Object-oriented Graphics Rendering Engine)</span>
00005 <span class="comment">For the latest info, see http://www.ogre3d.org/</span>
00006 <span class="comment"></span>
00007 <span class="comment">Copyright (c) 2000-2006 Torus Knot Software Ltd</span>
00008 <span class="comment">Also see acknowledgements in Readme.html</span>
00009 <span class="comment"></span>
00010 <span class="comment">This program is free software; you can redistribute it and/or modify it under</span>
00011 <span class="comment">the terms of the GNU Lesser General Public License as published by the Free Software</span>
00012 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
00013 <span class="comment">version.</span>
00014 <span class="comment"></span>
00015 <span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
00016 <span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
00017 <span class="comment">FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</span>
00018 <span class="comment"></span>
00019 <span class="comment">You should have received a copy of the GNU Lesser General Public License along with</span>
00020 <span class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</span>
00021 <span class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</span>
00022 <span class="comment">http://www.gnu.org/copyleft/lesser.txt.</span>
00023 <span class="comment"></span>
00024 <span class="comment">You may alternatively use this source under the terms of a specific version of</span>
00025 <span class="comment">the OGRE Unrestricted License provided you have obtained such a license from</span>
00026 <span class="comment">Torus Knot Software Ltd.</span>
00027 <span class="comment">-----------------------------------------------------------------------------</span>
00028 <span class="comment">*/</span>
00029 <span class="preprocessor">#ifndef __Matrix4__</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define __Matrix4__</span>
00031 <span class="preprocessor"></span>
00032 <span class="comment">// Precompiler options</span>
00033 <span class="preprocessor">#include "<a class="code" href="OgrePrerequisites_8h.html">OgrePrerequisites.h</a>"</span>
00034 
00035 <span class="preprocessor">#include "<a class="code" href="OgreVector3_8h.html">OgreVector3.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="OgreMatrix3_8h.html">OgreMatrix3.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="OgreVector4_8h.html">OgreVector4.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="OgrePlane_8h.html">OgrePlane.h</a>"</span>
00039 <span class="keyword">namespace </span>Ogre
00040 {
<a name="l00073"></a><a class="code" href="classOgre_1_1Matrix4.html">00073</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> Matrix4
00074     {
00075     <span class="keyword">protected</span>:
00077         <span class="keyword">union </span>{
<a name="l00078"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">00078</a>             <a class="code" href="namespaceOgre.html#a351">Real</a> m[4][4];
<a name="l00079"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p1">00079</a>             <a class="code" href="namespaceOgre.html#a351">Real</a> _m[16];
00080         };
00081     <span class="keyword">public</span>:
<a name="l00086"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a0">00086</a>         <span class="keyword">inline</span> Matrix4()
00087         {
00088         }
00089 
<a name="l00090"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a1">00090</a>         <span class="keyword">inline</span> Matrix4(
00091             Real m00, Real m01, Real m02, Real m03,
00092             Real m10, Real m11, Real m12, Real m13,
00093             Real m20, Real m21, Real m22, Real m23,
00094             Real m30, Real m31, Real m32, Real m33 )
00095         {
00096             m[0][0] = m00;
00097             m[0][1] = m01;
00098             m[0][2] = m02;
00099             m[0][3] = m03;
00100             m[1][0] = m10;
00101             m[1][1] = m11;
00102             m[1][2] = m12;
00103             m[1][3] = m13;
00104             m[2][0] = m20;
00105             m[2][1] = m21;
00106             m[2][2] = m22;
00107             m[2][3] = m23;
00108             m[3][0] = m30;
00109             m[3][1] = m31;
00110             m[3][2] = m32;
00111             m[3][3] = m33;
00112         }
00113 
<a name="l00117"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a2">00117</a>         <span class="keyword">inline</span> Matrix4(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Matrix3.html">Matrix3</a>&amp; m3x3)
00118         {
00119           operator=(IDENTITY);
00120           operator=(m3x3);
00121         }
00122 
<a name="l00126"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a3">00126</a>         <span class="keyword">inline</span> Matrix4(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a>&amp; rot)
00127         {
00128           <a class="code" href="classOgre_1_1Matrix3.html">Matrix3</a> m3x3;
00129           rot.ToRotationMatrix(m3x3);
00130           operator=(IDENTITY);
00131           operator=(m3x3);
00132         }
00133         
00134 
<a name="l00135"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a4">00135</a>         <span class="keyword">inline</span> <a class="code" href="namespaceOgre.html#a351">Real</a>* operator [] ( size_t iRow )
00136         {
00137             assert( iRow &lt; 4 );
00138             <span class="keywordflow">return</span> m[iRow];
00139         }
00140 
<a name="l00141"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a5">00141</a>         <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#a351">Real</a> *<span class="keyword">const</span> operator [] ( size_t iRow )<span class="keyword"> const</span>
00142 <span class="keyword">        </span>{
00143             assert( iRow &lt; 4 );
00144             <span class="keywordflow">return</span> m[iRow];
00145         }
00146 
<a name="l00147"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a6">00147</a>         <span class="keyword">inline</span> Matrix4 concatenate(<span class="keyword">const</span> Matrix4 &amp;m2)<span class="keyword"> const</span>
00148 <span class="keyword">        </span>{
00149             Matrix4 r;
00150             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = m[0][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] + m[0][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] + m[0][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] + m[0][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00151             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = m[0][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] + m[0][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] + m[0][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] + m[0][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00152             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = m[0][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] + m[0][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] + m[0][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] + m[0][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00153             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = m[0][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] + m[0][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] + m[0][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] + m[0][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00154 
00155             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = m[1][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] + m[1][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] + m[1][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] + m[1][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00156             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = m[1][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] + m[1][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] + m[1][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] + m[1][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00157             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = m[1][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] + m[1][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] + m[1][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] + m[1][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00158             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = m[1][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] + m[1][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] + m[1][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] + m[1][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00159 
00160             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = m[2][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] + m[2][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] + m[2][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] + m[2][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00161             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = m[2][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] + m[2][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] + m[2][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] + m[2][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00162             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = m[2][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] + m[2][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] + m[2][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] + m[2][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00163             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = m[2][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] + m[2][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] + m[2][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] + m[2][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00164 
00165             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = m[3][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] + m[3][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] + m[3][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] + m[3][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00166             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = m[3][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] + m[3][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] + m[3][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] + m[3][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00167             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = m[3][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] + m[3][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] + m[3][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] + m[3][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00168             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = m[3][0] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] + m[3][1] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] + m[3][2] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] + m[3][3] * m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00169 
00170             <span class="keywordflow">return</span> r;
00171         }
00172 
<a name="l00175"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a7">00175</a>         <span class="keyword">inline</span> Matrix4 <a class="code" href="namespaceOgre.html#a499">operator * </a>( <span class="keyword">const</span> Matrix4 &amp;m2 )<span class="keyword"> const</span>
00176 <span class="keyword">        </span>{
00177             <span class="keywordflow">return</span> concatenate( m2 );
00178         }
00179 
<a name="l00189"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a8">00189</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> <a class="code" href="namespaceOgre.html#a499">operator * </a>( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> &amp;v )<span class="keyword"> const</span>
00190 <span class="keyword">        </span>{
00191             <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> r;
00192 
00193             <a class="code" href="namespaceOgre.html#a351">Real</a> fInvW = 1.0 / ( m[3][0] * v.x + m[3][1] * v.y + m[3][2] * v.z + m[3][3] );
00194 
00195             r.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o0">x</a> = ( m[0][0] * v.x + m[0][1] * v.y + m[0][2] * v.z + m[0][3] ) * fInvW;
00196             r.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o1">y</a> = ( m[1][0] * v.x + m[1][1] * v.y + m[1][2] * v.z + m[1][3] ) * fInvW;
00197             r.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o2">z</a> = ( m[2][0] * v.x + m[2][1] * v.y + m[2][2] * v.z + m[2][3] ) * fInvW;
00198 
00199             <span class="keywordflow">return</span> r;
00200         }
<a name="l00201"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a9">00201</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a> <a class="code" href="namespaceOgre.html#a499">operator * </a>(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>&amp; v)<span class="keyword"> const</span>
00202 <span class="keyword">        </span>{
00203             <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>(
00204                 m[0][0] * v.x + m[0][1] * v.y + m[0][2] * v.z + m[0][3] * v.w, 
00205                 m[1][0] * v.x + m[1][1] * v.y + m[1][2] * v.z + m[1][3] * v.w,
00206                 m[2][0] * v.x + m[2][1] * v.y + m[2][2] * v.z + m[2][3] * v.w,
00207                 m[3][0] * v.x + m[3][1] * v.y + m[3][2] * v.z + m[3][3] * v.w
00208                 );
00209         }
<a name="l00210"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a10">00210</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Plane.html">Plane</a> <a class="code" href="namespaceOgre.html#a499">operator * </a>(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Plane.html">Plane</a>&amp; p)<span class="keyword"> const</span>
00211 <span class="keyword">        </span>{
00212             <a class="code" href="classOgre_1_1Plane.html">Plane</a> ret;
00213             Matrix4 invTrans = inverse().transpose();
00214             <a class="code" href="classOgre_1_1Vector4.html">Vector4</a> v4( p.normal.x, p.normal.y, p.normal.z, p.d );
00215             v4 = invTrans * v4;
00216             ret.<a class="code" href="classOgre_1_1Plane.html#Ogre_1_1Planeo0">normal</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o0">x</a> = v4.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o0">x</a>; 
00217             ret.<a class="code" href="classOgre_1_1Plane.html#Ogre_1_1Planeo0">normal</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o1">y</a> = v4.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o1">y</a>; 
00218             ret.<a class="code" href="classOgre_1_1Plane.html#Ogre_1_1Planeo0">normal</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o2">z</a> = v4.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3o2">z</a>;
00219             ret.<a class="code" href="classOgre_1_1Plane.html#Ogre_1_1Planeo1">d</a> = v4.w / ret.<a class="code" href="classOgre_1_1Plane.html#Ogre_1_1Planeo0">normal</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3a37">normalise</a>();
00220 
00221             <span class="keywordflow">return</span> ret;
00222         }
00223 
00224 
<a name="l00227"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a11">00227</a>         <span class="keyword">inline</span> Matrix4 operator + ( <span class="keyword">const</span> Matrix4 &amp;m2 )<span class="keyword"> const</span>
00228 <span class="keyword">        </span>{
00229             Matrix4 r;
00230 
00231             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = m[0][0] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0];
00232             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = m[0][1] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1];
00233             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = m[0][2] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2];
00234             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = m[0][3] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3];
00235 
00236             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = m[1][0] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0];
00237             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = m[1][1] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1];
00238             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = m[1][2] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2];
00239             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = m[1][3] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3];
00240 
00241             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = m[2][0] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0];
00242             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = m[2][1] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1];
00243             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = m[2][2] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2];
00244             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = m[2][3] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3];
00245 
00246             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = m[3][0] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00247             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = m[3][1] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00248             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = m[3][2] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00249             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = m[3][3] + m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00250 
00251             <span class="keywordflow">return</span> r;
00252         }
00253 
<a name="l00256"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a12">00256</a>         <span class="keyword">inline</span> Matrix4 operator - ( <span class="keyword">const</span> Matrix4 &amp;m2 )<span class="keyword"> const</span>
00257 <span class="keyword">        </span>{
00258             Matrix4 r;
00259             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = m[0][0] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0];
00260             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = m[0][1] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1];
00261             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = m[0][2] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2];
00262             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = m[0][3] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3];
00263 
00264             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = m[1][0] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0];
00265             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = m[1][1] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1];
00266             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = m[1][2] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2];
00267             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = m[1][3] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3];
00268 
00269             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = m[2][0] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0];
00270             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = m[2][1] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1];
00271             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = m[2][2] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2];
00272             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = m[2][3] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3];
00273 
00274             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = m[3][0] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0];
00275             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = m[3][1] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1];
00276             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = m[3][2] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2];
00277             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = m[3][3] - m2.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3];
00278 
00279             <span class="keywordflow">return</span> r;
00280         }
00281 
<a name="l00284"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a13">00284</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceOgre.html#a507">operator == </a>( <span class="keyword">const</span> Matrix4&amp; m2 )<span class="keyword"> const</span>
00285 <span class="keyword">        </span>{
00286             <span class="keywordflow">if</span>( 
00287                 m[0][0] != m2.m[0][0] || m[0][1] != m2.m[0][1] || m[0][2] != m2.m[0][2] || m[0][3] != m2.m[0][3] ||
00288                 m[1][0] != m2.m[1][0] || m[1][1] != m2.m[1][1] || m[1][2] != m2.m[1][2] || m[1][3] != m2.m[1][3] ||
00289                 m[2][0] != m2.m[2][0] || m[2][1] != m2.m[2][1] || m[2][2] != m2.m[2][2] || m[2][3] != m2.m[2][3] ||
00290                 m[3][0] != m2.m[3][0] || m[3][1] != m2.m[3][1] || m[3][2] != m2.m[3][2] || m[3][3] != m2.m[3][3] )
00291                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00292             <span class="keywordflow">return</span> <span class="keyword">true</span>;
00293         }
00294 
<a name="l00297"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a14">00297</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceOgre.html#a508">operator != </a>( <span class="keyword">const</span> Matrix4&amp; m2 )<span class="keyword"> const</span>
00298 <span class="keyword">        </span>{
00299             <span class="keywordflow">if</span>( 
00300                 m[0][0] != m2.m[0][0] || m[0][1] != m2.m[0][1] || m[0][2] != m2.m[0][2] || m[0][3] != m2.m[0][3] ||
00301                 m[1][0] != m2.m[1][0] || m[1][1] != m2.m[1][1] || m[1][2] != m2.m[1][2] || m[1][3] != m2.m[1][3] ||
00302                 m[2][0] != m2.m[2][0] || m[2][1] != m2.m[2][1] || m[2][2] != m2.m[2][2] || m[2][3] != m2.m[2][3] ||
00303                 m[3][0] != m2.m[3][0] || m[3][1] != m2.m[3][1] || m[3][2] != m2.m[3][2] || m[3][3] != m2.m[3][3] )
00304                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00305             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00306         }
00307 
<a name="l00310"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a15">00310</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> operator = ( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Matrix3.html">Matrix3</a>&amp; mat3 )
00311         {
00312             m[0][0] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0]; m[0][1] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1]; m[0][2] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2];
00313             m[1][0] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0]; m[1][1] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1]; m[1][2] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2];
00314             m[2][0] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0]; m[2][1] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1]; m[2][2] = mat3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2];
00315         }
00316 
<a name="l00317"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a16">00317</a>         <span class="keyword">inline</span> Matrix4 transpose(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00318 <span class="keyword">        </span>{
00319             <span class="keywordflow">return</span> Matrix4(m[0][0], m[1][0], m[2][0], m[3][0],
00320                            m[0][1], m[1][1], m[2][1], m[3][1],
00321                            m[0][2], m[1][2], m[2][2], m[3][2],
00322                            m[0][3], m[1][3], m[2][3], m[3][3]);
00323         }
00324 
00325         <span class="comment">/*</span>
00326 <span class="comment">        -----------------------------------------------------------------------</span>
00327 <span class="comment">        Translation Transformation</span>
00328 <span class="comment">        -----------------------------------------------------------------------</span>
00329 <span class="comment">        */</span>
<a name="l00332"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a17">00332</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> setTrans( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v )
00333         {
00334             m[0][3] = v.x;
00335             m[1][3] = v.y;
00336             m[2][3] = v.z;
00337         }
00338 
<a name="l00341"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a18">00341</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> getTrans()<span class="keyword"> const</span>
00342 <span class="keyword">        </span>{
00343           <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>(m[0][3], m[1][3], m[2][3]);
00344         }
00345         
00346 
<a name="l00349"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a19">00349</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> makeTrans( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v )
00350         {
00351             m[0][0] = 1.0; m[0][1] = 0.0; m[0][2] = 0.0; m[0][3] = v.x;
00352             m[1][0] = 0.0; m[1][1] = 1.0; m[1][2] = 0.0; m[1][3] = v.y;
00353             m[2][0] = 0.0; m[2][1] = 0.0; m[2][2] = 1.0; m[2][3] = v.z;
00354             m[3][0] = 0.0; m[3][1] = 0.0; m[3][2] = 0.0; m[3][3] = 1.0;
00355         }
00356 
<a name="l00357"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a20">00357</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> makeTrans( Real tx, Real ty, Real tz )
00358         {
00359             m[0][0] = 1.0; m[0][1] = 0.0; m[0][2] = 0.0; m[0][3] = tx;
00360             m[1][0] = 0.0; m[1][1] = 1.0; m[1][2] = 0.0; m[1][3] = ty;
00361             m[2][0] = 0.0; m[2][1] = 0.0; m[2][2] = 1.0; m[2][3] = tz;
00362             m[3][0] = 0.0; m[3][1] = 0.0; m[3][2] = 0.0; m[3][3] = 1.0;
00363         }
00364 
<a name="l00367"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4e0">00367</a>         <span class="keyword">inline</span> <span class="keyword">static</span> Matrix4 getTrans( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v )
00368         {
00369             Matrix4 r;
00370 
00371             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = v.x;
00372             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = v.y;
00373             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = v.z;
00374             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = 1.0;
00375 
00376             <span class="keywordflow">return</span> r;
00377         }
00378 
<a name="l00381"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4e1">00381</a>         <span class="keyword">inline</span> <span class="keyword">static</span> Matrix4 getTrans( Real t_x, Real t_y, Real t_z )
00382         {
00383             Matrix4 r;
00384 
00385             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = t_x;
00386             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = t_y;
00387             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = 1.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = t_z;
00388             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = 1.0;
00389 
00390             <span class="keywordflow">return</span> r;
00391         }
00392 
00393         <span class="comment">/*</span>
00394 <span class="comment">        -----------------------------------------------------------------------</span>
00395 <span class="comment">        Scale Transformation</span>
00396 <span class="comment">        -----------------------------------------------------------------------</span>
00397 <span class="comment">        */</span>
<a name="l00400"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a21">00400</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> setScale( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v )
00401         {
00402             m[0][0] = v.x;
00403             m[1][1] = v.y;
00404             m[2][2] = v.z;
00405         }
00406 
<a name="l00409"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4e2">00409</a>         <span class="keyword">inline</span> <span class="keyword">static</span> Matrix4 getScale( <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v )
00410         {
00411             Matrix4 r;
00412             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = v.x; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = 0.0;
00413             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = v.y; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = 0.0;
00414             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = v.z; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = 0.0;
00415             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = 1.0;
00416 
00417             <span class="keywordflow">return</span> r;
00418         }
00419 
<a name="l00422"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4e3">00422</a>         <span class="keyword">inline</span> <span class="keyword">static</span> Matrix4 getScale( Real s_x, Real s_y, Real s_z )
00423         {
00424             Matrix4 r;
00425             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = s_x; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][3] = 0.0;
00426             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = s_y; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][3] = 0.0;
00427             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = s_z; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][3] = 0.0;
00428             r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][0] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][1] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][2] = 0.0; r.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[3][3] = 1.0;
00429 
00430             <span class="keywordflow">return</span> r;
00431         }
00432 
<a name="l00436"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a22">00436</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> extract3x3Matrix(<a class="code" href="classOgre_1_1Matrix3.html">Matrix3</a>&amp; m3x3)<span class="keyword"> const</span>
00437 <span class="keyword">        </span>{
00438             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][0] = m[0][0];
00439             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][1] = m[0][1];
00440             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[0][2] = m[0][2];
00441             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][0] = m[1][0];
00442             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][1] = m[1][1];
00443             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[1][2] = m[1][2];
00444             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][0] = m[2][0];
00445             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][1] = m[2][1];
00446             m3x3.<a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4p0">m</a>[2][2] = m[2][2];
00447 
00448         }
00449 
<a name="l00452"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a23">00452</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a> extractQuaternion()<span class="keyword"> const</span>
00453 <span class="keyword">        </span>{
00454           <a class="code" href="classOgre_1_1Matrix3.html">Matrix3</a> m3x3;
00455           extract3x3Matrix(m3x3);
00456           <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a>(m3x3);
00457         }
00458 
<a name="l00459"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4s0">00459</a>         <span class="keyword">static</span> <span class="keyword">const</span> Matrix4 ZERO;
<a name="l00460"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4s1">00460</a>         <span class="keyword">static</span> <span class="keyword">const</span> Matrix4 IDENTITY;
<a name="l00463"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4s2">00463</a>         <span class="keyword">static</span> <span class="keyword">const</span> Matrix4 CLIPSPACE2DTOIMAGESPACE;
00464 
<a name="l00465"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a24">00465</a>         <span class="keyword">inline</span> Matrix4 <a class="code" href="namespaceOgre.html#a499">operator*</a>(Real scalar)<span class="keyword"> const</span>
00466 <span class="keyword">        </span>{
00467             <span class="keywordflow">return</span> Matrix4(
00468                 scalar*m[0][0], scalar*m[0][1], scalar*m[0][2], scalar*m[0][3],
00469                 scalar*m[1][0], scalar*m[1][1], scalar*m[1][2], scalar*m[1][3],
00470                 scalar*m[2][0], scalar*m[2][1], scalar*m[2][2], scalar*m[2][3],
00471                 scalar*m[3][0], scalar*m[3][1], scalar*m[3][2], scalar*m[3][3]);
00472         }
00473 
00476         <span class="keyword">inline</span> <a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> <span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span> &lt;&lt;
<a name="l00477"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4n0">00477</a>             ( std::ostream&amp; o, <span class="keyword">const</span> Matrix4&amp; m )
00478         {
00479             o &lt;&lt; <span class="stringliteral">"Matrix4("</span>;
00480             <span class="keywordflow">for</span> (size_t i = 0; i &lt; 4; ++i)
00481             {
00482                 o &lt;&lt; <span class="stringliteral">" row"</span> &lt;&lt; (unsigned)i &lt;&lt; <span class="stringliteral">"{"</span>;
00483                 <span class="keywordflow">for</span>(size_t j = 0; j &lt; 4; ++j)
00484                 {
00485                     o &lt;&lt; m[i][j] &lt;&lt; <span class="stringliteral">" "</span>;
00486                 }
00487                 o &lt;&lt; <span class="stringliteral">"}"</span>;
00488             }
00489             o &lt;&lt; <span class="stringliteral">")"</span>;
00490             <span class="keywordflow">return</span> o;
00491         }
00492         
00493         Matrix4 adjoint() <span class="keyword">const</span>;
00494         <a class="code" href="namespaceOgre.html#a351">Real</a> determinant() <span class="keyword">const</span>;
00495         Matrix4 inverse() <span class="keyword">const</span>;
00496 
00503         <span class="keywordtype">void</span> makeTransform(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; position, <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; scale, <span class="keyword">const</span> <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a>&amp; orientation);
00504 
00510         <span class="keywordtype">void</span> makeInverseTransform(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; position, <span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; scale, <span class="keyword">const</span> <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a>&amp; orientation);
00511 
<a name="l00517"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a30">00517</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> isAffine(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00518 <span class="keyword">        </span>{
00519             <span class="keywordflow">return</span> m[3][0] == 0 &amp;&amp; m[3][1] == 0 &amp;&amp; m[3][2] == 0 &amp;&amp; m[3][3] == 1;
00520         }
00521 
00526         Matrix4 inverseAffine(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00527 
<a name="l00532"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a32">00532</a>         <span class="keyword">inline</span> Matrix4 concatenateAffine(<span class="keyword">const</span> Matrix4 &amp;m2)<span class="keyword"> const</span>
00533 <span class="keyword">        </span>{
00534             assert(isAffine() &amp;&amp; m2.isAffine());
00535 
00536             <span class="keywordflow">return</span> Matrix4(
00537                 m[0][0] * m2.m[0][0] + m[0][1] * m2.m[1][0] + m[0][2] * m2.m[2][0],
00538                 m[0][0] * m2.m[0][1] + m[0][1] * m2.m[1][1] + m[0][2] * m2.m[2][1],
00539                 m[0][0] * m2.m[0][2] + m[0][1] * m2.m[1][2] + m[0][2] * m2.m[2][2],
00540                 m[0][0] * m2.m[0][3] + m[0][1] * m2.m[1][3] + m[0][2] * m2.m[2][3] + m[0][3],
00541 
00542                 m[1][0] * m2.m[0][0] + m[1][1] * m2.m[1][0] + m[1][2] * m2.m[2][0],
00543                 m[1][0] * m2.m[0][1] + m[1][1] * m2.m[1][1] + m[1][2] * m2.m[2][1],
00544                 m[1][0] * m2.m[0][2] + m[1][1] * m2.m[1][2] + m[1][2] * m2.m[2][2],
00545                 m[1][0] * m2.m[0][3] + m[1][1] * m2.m[1][3] + m[1][2] * m2.m[2][3] + m[1][3],
00546 
00547                 m[2][0] * m2.m[0][0] + m[2][1] * m2.m[1][0] + m[2][2] * m2.m[2][0],
00548                 m[2][0] * m2.m[0][1] + m[2][1] * m2.m[1][1] + m[2][2] * m2.m[2][1],
00549                 m[2][0] * m2.m[0][2] + m[2][1] * m2.m[1][2] + m[2][2] * m2.m[2][2],
00550                 m[2][0] * m2.m[0][3] + m[2][1] * m2.m[1][3] + m[2][2] * m2.m[2][3] + m[2][3],
00551 
00552                 0, 0, 0, 1);
00553         }
00554 
<a name="l00562"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a33">00562</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> transformAffine(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; v)<span class="keyword"> const</span>
00563 <span class="keyword">        </span>{
00564             assert(isAffine());
00565 
00566             <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>(
00567                     m[0][0] * v.x + m[0][1] * v.y + m[0][2] * v.z + m[0][3], 
00568                     m[1][0] * v.x + m[1][1] * v.y + m[1][2] * v.z + m[1][3],
00569                     m[2][0] * v.x + m[2][1] * v.y + m[2][2] * v.z + m[2][3]);
00570         }
00571 
<a name="l00576"></a><a class="code" href="classOgre_1_1Matrix4.html#Ogre_1_1Matrix4a34">00576</a>         <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a> transformAffine(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>&amp; v)<span class="keyword"> const</span>
00577 <span class="keyword">        </span>{
00578             assert(isAffine());
00579 
00580             <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>(
00581                 m[0][0] * v.x + m[0][1] * v.y + m[0][2] * v.z + m[0][3] * v.w, 
00582                 m[1][0] * v.x + m[1][1] * v.y + m[1][2] * v.z + m[1][3] * v.w,
00583                 m[2][0] * v.x + m[2][1] * v.y + m[2][2] * v.z + m[2][3] * v.w,
00584                 v.w);
00585         }
00586     };
00587 
00588     <span class="comment">/* Removed from Vector4 and made a non-member here because otherwise</span>
00589 <span class="comment">       OgreMatrix4.h and OgreVector4.h have to try to include and inline each </span>
00590 <span class="comment">       other, which frankly doesn't work ;)</span>
00591 <span class="comment">   */</span>
<a name="l00592"></a><a class="code" href="namespaceOgre.html#a503">00592</a>     <span class="keyword">inline</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a> <a class="code" href="namespaceOgre.html#a499">operator * </a>(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>&amp; v, <span class="keyword">const</span> Matrix4&amp; mat)
00593     {
00594         <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1Vector4.html">Vector4</a>(
00595             v.x*mat[0][0] + v.y*mat[1][0] + v.z*mat[2][0] + v.w*mat[3][0],
00596             v.x*mat[0][1] + v.y*mat[1][1] + v.z*mat[2][1] + v.w*mat[3][1],
00597             v.x*mat[0][2] + v.y*mat[1][2] + v.z*mat[2][2] + v.w*mat[3][2],
00598             v.x*mat[0][3] + v.y*mat[1][3] + v.z*mat[2][3] + v.w*mat[3][3]
00599             );
00600     }
00601 
00602 }
00603 <span class="preprocessor">#endif</span>
</pre></div><hr>
<p>
Copyright &copy; 2000-2005 by The OGRE Team<br />
<!--Creative Commons License--><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights20.png"/></a><br/>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 License</a>.<br/>
		<!--/Creative Commons License--><!-- <rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
		<Work rdf:about="">
			<license rdf:resource="http://creativecommons.org/licenses/by-sa/2.5/" />
	<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
		</Work>
		<License rdf:about="http://creativecommons.org/licenses/by-sa/2.5/"><permits rdf:resource="http://web.resource.org/cc/Reproduction"/><permits rdf:resource="http://web.resource.org/cc/Distribution"/><requires rdf:resource="http://web.resource.org/cc/Notice"/><requires rdf:resource="http://web.resource.org/cc/Attribution"/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/><requires rdf:resource="http://web.resource.org/cc/ShareAlike"/></License></rdf:RDF> -->

Last modified Sun Sep 30 10:50:57 2007
</p>
</body>
</html>
