<html>
<head>
<title>OGRE: OgreRenderQueueSortingGrouping.h Source File - OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="doxygen.css">
<link type="text/css" rel="stylesheet" href="tabs.css">
</head>

<body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">OgreMain</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>OgreRenderQueueSortingGrouping.h</h1><a href="OgreRenderQueueSortingGrouping_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">-----------------------------------------------------------------------------</span>
00003 <span class="comment">This source file is part of OGRE</span>
00004 <span class="comment">    (Object-oriented Graphics Rendering Engine)</span>
00005 <span class="comment">For the latest info, see http://www.ogre3d.org/</span>
00006 <span class="comment"></span>
00007 <span class="comment">Copyright (c) 2000-2006 Torus Knot Software Ltd</span>
00008 <span class="comment">Also see acknowledgements in Readme.html</span>
00009 <span class="comment"></span>
00010 <span class="comment">This program is free software; you can redistribute it and/or modify it under</span>
00011 <span class="comment">the terms of the GNU Lesser General Public License as published by the Free Software</span>
00012 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
00013 <span class="comment">version.</span>
00014 <span class="comment"></span>
00015 <span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
00016 <span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
00017 <span class="comment">FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</span>
00018 <span class="comment"></span>
00019 <span class="comment">You should have received a copy of the GNU Lesser General Public License along with</span>
00020 <span class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</span>
00021 <span class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</span>
00022 <span class="comment">http://www.gnu.org/copyleft/lesser.txt.</span>
00023 <span class="comment"></span>
00024 <span class="comment">You may alternatively use this source under the terms of a specific version of</span>
00025 <span class="comment">the OGRE Unrestricted License provided you have obtained such a license from</span>
00026 <span class="comment">Torus Knot Software Ltd.</span>
00027 <span class="comment">-----------------------------------------------------------------------------</span>
00028 <span class="comment">*/</span>
00029 <span class="preprocessor">#ifndef __RenderQueueSortingGrouping_H__</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define __RenderQueueSortingGrouping_H__</span>
00031 <span class="preprocessor"></span>
00032 <span class="comment">// Precompiler options</span>
00033 <span class="preprocessor">#include "<a class="code" href="OgrePrerequisites_8h.html">OgrePrerequisites.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="OgreIteratorWrappers_8h.html">OgreIteratorWrappers.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="OgreMaterial_8h.html">OgreMaterial.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="OgreTechnique_8h.html">OgreTechnique.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="OgrePass_8h.html">OgrePass.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="OgreRadixSort_8h.html">OgreRadixSort.h</a>"</span>
00039 
00040 <span class="keyword">namespace </span>Ogre {
00041 
<a name="l00046"></a><a class="code" href="structOgre_1_1RenderablePass.html">00046</a>     <span class="keyword">struct </span><a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>
00047     {
<a name="l00049"></a><a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso0">00049</a>         <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* <a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso0">renderable</a>;
<a name="l00051"></a><a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso1">00051</a>         <a class="code" href="classOgre_1_1Pass.html">Pass</a>* <a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso1">pass</a>;
00052 
<a name="l00053"></a><a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePassa0">00053</a>         <a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePassa0">RenderablePass</a>(<a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* rend, <a class="code" href="classOgre_1_1Pass.html">Pass</a>* p) :<a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso0">renderable</a>(rend), <a class="code" href="structOgre_1_1RenderablePass.html#Ogre_1_1RenderablePasso1">pass</a>(p) {}
00054     };
00055 
00056 
<a name="l00064"></a><a class="code" href="classOgre_1_1QueuedRenderableVisitor.html">00064</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> QueuedRenderableVisitor
00065     {
00066     <span class="keyword">public</span>:
<a name="l00067"></a><a class="code" href="classOgre_1_1QueuedRenderableVisitor.html#Ogre_1_1QueuedRenderableVisitora0">00067</a>         QueuedRenderableVisitor() {}
<a name="l00068"></a><a class="code" href="classOgre_1_1QueuedRenderableVisitor.html#Ogre_1_1QueuedRenderableVisitora1">00068</a>         <span class="keyword">virtual</span> ~QueuedRenderableVisitor() {}
00069         
00076         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit(<span class="keyword">const</span> <a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>* rp) = 0;
00077 
00078         <span class="comment">/* When visiting a collection grouped by pass, this is</span>
00079 <span class="comment">            called when the grouping pass changes.</span>
00080 <span class="comment">        @remarks</span>
00081 <span class="comment">            If this method is called, the RenderablePass visit </span>
00082 <span class="comment">            method will not be called for this collection. The </span>
00083 <span class="comment">            Renderable visit method will be called for each item</span>
00084 <span class="comment">            underneath the pass grouping level.</span>
00085 <span class="comment">        @returns True to continue, false to skip the Renderables underneath</span>
00086 <span class="comment">        */</span>
00087         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> visit(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Pass.html">Pass</a>* p) = 0;
00094         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* r) = 0;
00095         
00096         
00097     };
00098 
<a name="l00108"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html">00108</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> QueuedRenderableCollection
00109     {
00110     <span class="keyword">public</span>:
<a name="l00119"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionw3">00119</a>         <span class="keyword">enum</span> OrganisationMode
00120         {
00122             OM_PASS_GROUP = 1,
00124             OM_SORT_DESCENDING = 2,
00128             OM_SORT_ASCENDING = 6
00129         };
00130 
00131     <span class="keyword">protected</span>:
<a name="l00133"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1PassGroupLess.html">00133</a>         <span class="keyword">struct </span><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1PassGroupLess.html">PassGroupLess</a>
00134         {
<a name="l00135"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1PassGroupLess.html#Ogre_1_1QueuedRenderableCollection_1_1PassGroupLessa0">00135</a>             <span class="keywordtype">bool</span> <a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> operator()(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Pass.html">Pass</a>* a, <span class="keyword">const</span> <a class="code" href="classOgre_1_1Pass.html">Pass</a>* b)<span class="keyword"> const</span>
00136 <span class="keyword">            </span>{
00137                 <span class="comment">// Sort by passHash, which is pass, then texture unit changes</span>
00138                 <a class="code" href="namespaceOgre.html#a347">uint32</a> hasha = a-&gt;getHash();
00139                 <a class="code" href="namespaceOgre.html#a347">uint32</a> hashb = b-&gt;getHash();
00140                 <span class="keywordflow">if</span> (hasha == hashb)
00141                 {
00142                     <span class="comment">// Must differentTransparentQueueItemLessiate by pointer incase 2 passes end up with the same hash</span>
00143                     <span class="keywordflow">return</span> a &lt; b;
00144                 }
00145                 <span class="keywordflow">else</span>
00146                 {
00147                     <span class="keywordflow">return</span> hasha &lt; hashb;
00148                 }
00149             }
00150         };
<a name="l00152"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html">00152</a>         <span class="keyword">struct </span><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html">DepthSortDescendingLess</a>
00153         {
<a name="l00154"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html#Ogre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLesso0">00154</a>             <span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* camera;
00155 
<a name="l00156"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html#Ogre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLessa0">00156</a>             <a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html">DepthSortDescendingLess</a>(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam)
00157                 : camera(cam)
00158             {
00159             }
00160 
<a name="l00161"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLess.html#Ogre_1_1QueuedRenderableCollection_1_1DepthSortDescendingLessa1">00161</a>             <span class="keywordtype">bool</span> <a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> operator()(<span class="keyword">const</span> <a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>&amp; a, <span class="keyword">const</span> <a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>&amp; b)<span class="keyword"> const</span>
00162 <span class="keyword">            </span>{
00163                 <span class="keywordflow">if</span> (a.renderable == b.renderable)
00164                 {
00165                     <span class="comment">// Same renderable, sort by pass hash</span>
00166                     <span class="keywordflow">return</span> a.pass-&gt;getHash() &lt; b.pass-&gt;getHash();
00167                 }
00168                 <span class="keywordflow">else</span>
00169                 {
00170                     <span class="comment">// Different renderables, sort by depth</span>
00171                     <a class="code" href="namespaceOgre.html#a351">Real</a> adepth = a.renderable-&gt;getSquaredViewDepth(camera);
00172                     <a class="code" href="namespaceOgre.html#a351">Real</a> bdepth = b.renderable-&gt;getSquaredViewDepth(camera);
00173                     <span class="keywordflow">if</span> (Math::RealEqual(adepth, bdepth))
00174                     {
00175                         <span class="comment">// Must return deterministic result, doesn't matter what</span>
00176                         <span class="keywordflow">return</span> a.pass &lt; b.pass;
00177                     }
00178                     <span class="keywordflow">else</span>
00179                     {
00180                         <span class="comment">// Sort DESCENDING by depth (ie far objects first)</span>
00181                         <span class="keywordflow">return</span> (adepth &gt; bdepth);
00182                     }
00183                 }
00184 
00185             }
00186         };
00187 
<a name="l00191"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionx0">00191</a>         <span class="keyword">typedef</span> std::vector&lt;RenderablePass&gt; RenderablePassList;
<a name="l00192"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionx1">00192</a>         <span class="keyword">typedef</span> std::vector&lt;Renderable*&gt; RenderableList;
<a name="l00194"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionx2">00194</a>         <span class="keyword">typedef</span> std::map&lt;Pass*, RenderableList*, PassGroupLess&gt; PassGroupRenderableMap;
00195 
<a name="l00197"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorPass.html">00197</a>         <span class="keyword">struct </span><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorPass.html">RadixSortFunctorPass</a>
00198         {
<a name="l00199"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorPass.html#Ogre_1_1QueuedRenderableCollection_1_1RadixSortFunctorPassa0">00199</a>             <a class="code" href="namespaceOgre.html#a347">uint32</a> operator()(<span class="keyword">const</span> <a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>&amp; p)<span class="keyword"> const</span>
00200 <span class="keyword">            </span>{
00201                 <span class="keywordflow">return</span> p.pass-&gt;getHash();
00202             }
00203         };
00204 
<a name="l00206"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectiont0">00206</a>         <span class="keyword">static</span> <a class="code" href="classOgre_1_1RadixSort.html">RadixSort&lt;RenderablePassList, RenderablePass, uint32&gt;</a> msRadixSorter1;
00207 
<a name="l00209"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html">00209</a>         <span class="keyword">struct </span><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html">RadixSortFunctorDistance</a>
00210         {
<a name="l00211"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html#Ogre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistanceo0">00211</a>             <span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* camera;
00212 
<a name="l00213"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html#Ogre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistancea0">00213</a>             <a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html">RadixSortFunctorDistance</a>(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam)
00214                 : camera(cam)
00215             {
00216             }
00217 
<a name="l00218"></a><a class="code" href="structOgre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistance.html#Ogre_1_1QueuedRenderableCollection_1_1RadixSortFunctorDistancea1">00218</a>             <span class="keywordtype">float</span> operator()(<span class="keyword">const</span> <a class="code" href="structOgre_1_1RenderablePass.html">RenderablePass</a>&amp; p)<span class="keyword"> const</span>
00219 <span class="keyword">            </span>{
00220                 <span class="comment">// Sort DESCENDING by depth (ie far objects first), use negative distance</span>
00221                 <span class="comment">// here because radix sorter always dealing with accessing sort</span>
00222                 <span class="keywordflow">return</span> static_cast&lt;float&gt;(- p.renderable-&gt;getSquaredViewDepth(camera));
00223             }
00224         };
00225 
<a name="l00227"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectiont1">00227</a>         <span class="keyword">static</span> <a class="code" href="classOgre_1_1RadixSort.html">RadixSort&lt;RenderablePassList, RenderablePass, float&gt;</a> msRadixSorter2;
00228 
<a name="l00230"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionp0">00230</a>         <a class="code" href="namespaceOgre.html#a349">uint8</a> mOrganisationMode;
00231 
<a name="l00233"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionp1">00233</a>         PassGroupRenderableMap mGrouped;
<a name="l00235"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectionp2">00235</a>         RenderablePassList mSortedDescending;
00236 
00238         <span class="keywordtype">void</span> acceptVisitorGrouped(QueuedRenderableVisitor* visitor) <span class="keyword">const</span>;
00240         <span class="keywordtype">void</span> acceptVisitorDescending(QueuedRenderableVisitor* visitor) <span class="keyword">const</span>;
00242         <span class="keywordtype">void</span> acceptVisitorAscending(QueuedRenderableVisitor* visitor) <span class="keyword">const</span>;
00243 
00244     <span class="keyword">public</span>:
00245         QueuedRenderableCollection();
00246         ~QueuedRenderableCollection();
00247 
00249         <span class="keywordtype">void</span> clear(<span class="keywordtype">void</span>);
00250 
00256         <span class="keywordtype">void</span> removePassGroup(<a class="code" href="classOgre_1_1Pass.html">Pass</a>* p);
00257         
<a name="l00263"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectiona4">00263</a>         <span class="keywordtype">void</span> resetOrganisationModes(<span class="keywordtype">void</span>) 
00264         { 
00265             mOrganisationMode = 0; 
00266         }
00267         
<a name="l00273"></a><a class="code" href="classOgre_1_1QueuedRenderableCollection.html#Ogre_1_1QueuedRenderableCollectiona5">00273</a>         <span class="keywordtype">void</span> addOrganisationMode(OrganisationMode om) 
00274         { 
00275             mOrganisationMode |= om; 
00276         }
00277 
00279         <span class="keywordtype">void</span> addRenderable(<a class="code" href="classOgre_1_1Pass.html">Pass</a>* pass, <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* rend);
00280         
00284         <span class="keywordtype">void</span> sort(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam);
00285 
00292         <span class="keywordtype">void</span> acceptVisitor(QueuedRenderableVisitor* visitor, OrganisationMode om) <span class="keyword">const</span>;
00293         
00294     };
00295 
<a name="l00315"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html">00315</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> RenderPriorityGroup
00316     {
00317     <span class="keyword">protected</span>:
00318 
<a name="l00320"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp0">00320</a>         <a class="code" href="classOgre_1_1RenderQueueGroup.html">RenderQueueGroup</a>* mParent;
<a name="l00321"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp1">00321</a>         <span class="keywordtype">bool</span> mSplitPassesByLightingType;
<a name="l00322"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp2">00322</a>         <span class="keywordtype">bool</span> mSplitNoShadowPasses;
<a name="l00323"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp3">00323</a>         <span class="keywordtype">bool</span> mShadowCastersNotReceivers;
<a name="l00325"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp4">00325</a>         QueuedRenderableCollection mSolidsBasic;
<a name="l00327"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp5">00327</a>         QueuedRenderableCollection mSolidsDiffuseSpecular;
<a name="l00329"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp6">00329</a>         QueuedRenderableCollection mSolidsDecal;
<a name="l00331"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp7">00331</a>         QueuedRenderableCollection mSolidsNoShadowReceive;
<a name="l00333"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupp8">00333</a>         QueuedRenderableCollection mTransparents;
00334 
00336         <span class="keywordtype">void</span> removePassEntry(<a class="code" href="classOgre_1_1Pass.html">Pass</a>* p);
00337 
00339         <span class="keywordtype">void</span> addSolidRenderable(<a class="code" href="classOgre_1_1Technique.html">Technique</a>* pTech, <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* rend, <span class="keywordtype">bool</span> toNoShadowMap);
00341         <span class="keywordtype">void</span> addSolidRenderableSplitByLightType(<a class="code" href="classOgre_1_1Technique.html">Technique</a>* pTech, <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* rend);
00343         <span class="keywordtype">void</span> addTransparentRenderable(<a class="code" href="classOgre_1_1Technique.html">Technique</a>* pTech, <a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* rend);
00344 
00345     <span class="keyword">public</span>:
00346         RenderPriorityGroup(<a class="code" href="classOgre_1_1RenderQueueGroup.html">RenderQueueGroup</a>* parent, 
00347             <span class="keywordtype">bool</span> splitPassesByLightingType,
00348             <span class="keywordtype">bool</span> splitNoShadowPasses, 
00349             <span class="keywordtype">bool</span> shadowCastersNotReceivers); 
00350            
<a name="l00351"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa1">00351</a>         ~RenderPriorityGroup() { }
00352 
<a name="l00357"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa2">00357</a>         <span class="keyword">const</span> QueuedRenderableCollection&amp; getSolidsBasic(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00358 <span class="keyword">        </span>{ <span class="keywordflow">return</span> mSolidsBasic; }
<a name="l00361"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa3">00361</a>         <span class="keyword">const</span> QueuedRenderableCollection&amp; getSolidsDiffuseSpecular(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00362 <span class="keyword">        </span>{ <span class="keywordflow">return</span> mSolidsDiffuseSpecular; }
<a name="l00365"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa4">00365</a>         <span class="keyword">const</span> QueuedRenderableCollection&amp; getSolidsDecal(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00366 <span class="keyword">        </span>{ <span class="keywordflow">return</span> mSolidsDecal; }
<a name="l00369"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa5">00369</a>         <span class="keyword">const</span> QueuedRenderableCollection&amp; getSolidsNoShadowReceive(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00370 <span class="keyword">        </span>{ <span class="keywordflow">return</span> mSolidsNoShadowReceive; }
<a name="l00372"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa6">00372</a>         <span class="keyword">const</span> QueuedRenderableCollection&amp; getTransparents(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00373 <span class="keyword">        </span>{ <span class="keywordflow">return</span> mTransparents; }
00374 
00375 
00382         <span class="keywordtype">void</span> resetOrganisationModes(<span class="keywordtype">void</span>);
00383         
00390         <span class="keywordtype">void</span> addOrganisationMode(QueuedRenderableCollection::OrganisationMode om); 
00391 
00398         <span class="keywordtype">void</span> defaultOrganisationMode(<span class="keywordtype">void</span>); 
00399 
00401         <span class="keywordtype">void</span> addRenderable(<a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* pRend, <a class="code" href="classOgre_1_1Technique.html">Technique</a>* pTech);
00402 
00405         <span class="keywordtype">void</span> sort(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam);
00406 
00409         <span class="keywordtype">void</span> clear(<span class="keywordtype">void</span>);
00410 
<a name="l00414"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa13">00414</a>         <span class="keywordtype">void</span> setSplitPassesByLightingType(<span class="keywordtype">bool</span> split)
00415         {
00416             mSplitPassesByLightingType = split;
00417         }
00418 
<a name="l00422"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa14">00422</a>         <span class="keywordtype">void</span> setSplitNoShadowPasses(<span class="keywordtype">bool</span> split)
00423         {
00424             mSplitNoShadowPasses = split;
00425         }
00426 
<a name="l00430"></a><a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa15">00430</a>         <span class="keywordtype">void</span> setShadowCastersCannotBeReceivers(<span class="keywordtype">bool</span> ind)
00431         {
00432             mShadowCastersNotReceivers = ind;
00433         }
00434 
00435 
00436 
00437     };
00438 
00439 
<a name="l00447"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html">00447</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> RenderQueueGroup
00448     {
00449     <span class="keyword">public</span>:
<a name="l00450"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupw0">00450</a>         <span class="keyword">typedef</span> std::map&lt;ushort, RenderPriorityGroup*, std::less&lt;ushort&gt; &gt; PriorityMap;
<a name="l00451"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupw1">00451</a>         <span class="keyword">typedef</span> <a class="code" href="classOgre_1_1MapIterator.html">MapIterator&lt;PriorityMap&gt;</a> <a class="code" href="classOgre_1_1MapIterator.html">PriorityMapIterator</a>;
00452     <span class="keyword">protected</span>:
<a name="l00453"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp0">00453</a>         <a class="code" href="classOgre_1_1RenderQueue.html">RenderQueue</a>* mParent;
<a name="l00454"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp1">00454</a>         <span class="keywordtype">bool</span> mSplitPassesByLightingType;
<a name="l00455"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp2">00455</a>         <span class="keywordtype">bool</span> mSplitNoShadowPasses;
<a name="l00456"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp3">00456</a>         <span class="keywordtype">bool</span> mShadowCastersNotReceivers;
<a name="l00458"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp4">00458</a>         PriorityMap mPriorityGroups;
<a name="l00460"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupp5">00460</a>         <span class="keywordtype">bool</span> mShadowsEnabled;
00461 
00462 
00463     <span class="keyword">public</span>:
<a name="l00464"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa0">00464</a>         RenderQueueGroup(<a class="code" href="classOgre_1_1RenderQueue.html">RenderQueue</a>* parent,
00465             <span class="keywordtype">bool</span> splitPassesByLightingType,
00466             <span class="keywordtype">bool</span> splitNoShadowPasses,
00467             <span class="keywordtype">bool</span> shadowCastersNotReceivers) 
00468             : mParent(parent)
00469             , mSplitPassesByLightingType(splitPassesByLightingType)
00470             , mSplitNoShadowPasses(splitNoShadowPasses)
00471             , mShadowCastersNotReceivers(shadowCastersNotReceivers)
00472             , mShadowsEnabled(true)
00473         {
00474         }
00475 
<a name="l00476"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa1">00476</a>         ~RenderQueueGroup() {
00477             <span class="comment">// destroy contents now</span>
00478             PriorityMap::iterator i;
00479             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != mPriorityGroups.end(); ++i)
00480             {
00481                 <span class="keyword">delete</span> i-&gt;second;
00482             }
00483         }
00484 
<a name="l00486"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa2">00486</a>         <a class="code" href="classOgre_1_1MapIterator.html">PriorityMapIterator</a> getIterator(<span class="keywordtype">void</span>)
00487         {
00488             <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1MapIterator.html">PriorityMapIterator</a>(mPriorityGroups.begin(), mPriorityGroups.end());
00489         }
00490 
<a name="l00492"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa3">00492</a>         <span class="keywordtype">void</span> addRenderable(<a class="code" href="classOgre_1_1Renderable.html">Renderable</a>* pRend, <a class="code" href="classOgre_1_1Technique.html">Technique</a>* pTech, ushort priority)
00493         {
00494             <span class="comment">// Check if priority group is there</span>
00495             PriorityMap::iterator i = mPriorityGroups.find(priority);
00496             RenderPriorityGroup* pPriorityGrp;
00497             <span class="keywordflow">if</span> (i == mPriorityGroups.end())
00498             {
00499                 <span class="comment">// Missing, create</span>
00500                 pPriorityGrp = <span class="keyword">new</span> RenderPriorityGroup(<span class="keyword">this</span>, 
00501                     mSplitPassesByLightingType,
00502                     mSplitNoShadowPasses, 
00503                     mShadowCastersNotReceivers);
00504                 mPriorityGroups.insert(PriorityMap::value_type(priority, pPriorityGrp));
00505             }
00506             <span class="keywordflow">else</span>
00507             {
00508                 pPriorityGrp = i-&gt;second;
00509             }
00510 
00511             <span class="comment">// Add</span>
00512             pPriorityGrp-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa10">addRenderable</a>(pRend, pTech);
00513 
00514         }
00515 
<a name="l00523"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa4">00523</a>         <span class="keywordtype">void</span> clear(<span class="keywordtype">bool</span> destroy = <span class="keyword">false</span>)
00524         {
00525             PriorityMap::iterator i, iend;
00526             iend = mPriorityGroups.end();
00527             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00528             {
00529                 <span class="keywordflow">if</span> (destroy)
00530                     <span class="keyword">delete</span> i-&gt;second;
00531                 <span class="keywordflow">else</span>
00532                     i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa12">clear</a>();
00533             }
00534 
00535             <span class="keywordflow">if</span> (destroy)
00536                 mPriorityGroups.<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa12">clear</a>();
00537 
00538         }
00539 
<a name="l00552"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa5">00552</a>         <span class="keywordtype">void</span> setShadowsEnabled(<span class="keywordtype">bool</span> enabled) { mShadowsEnabled = enabled; }
00553 
<a name="l00555"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa6">00555</a>         <span class="keywordtype">bool</span> getShadowsEnabled(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mShadowsEnabled; }
00556 
<a name="l00560"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa7">00560</a>         <span class="keywordtype">void</span> setSplitPassesByLightingType(<span class="keywordtype">bool</span> split)
00561         {
00562             mSplitPassesByLightingType = split;
00563             PriorityMap::iterator i, iend;
00564             iend = mPriorityGroups.end();
00565             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00566             {
00567                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa13">setSplitPassesByLightingType</a>(split);
00568             }
00569         }
<a name="l00574"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa8">00574</a>         <span class="keywordtype">void</span> setSplitNoShadowPasses(<span class="keywordtype">bool</span> split)
00575         {
00576             mSplitNoShadowPasses = split;
00577             PriorityMap::iterator i, iend;
00578             iend = mPriorityGroups.end();
00579             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00580             {
00581                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa14">setSplitNoShadowPasses</a>(split);
00582             }
00583         }
<a name="l00587"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa9">00587</a>         <span class="keywordtype">void</span> setShadowCastersCannotBeReceivers(<span class="keywordtype">bool</span> ind)
00588         {
00589             mShadowCastersNotReceivers = ind;
00590             PriorityMap::iterator i, iend;
00591             iend = mPriorityGroups.end();
00592             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00593             {
00594                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa15">setShadowCastersCannotBeReceivers</a>(ind);
00595             }
00596         }
<a name="l00603"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa10">00603</a>         <span class="keywordtype">void</span> resetOrganisationModes(<span class="keywordtype">void</span>)
00604         {
00605             PriorityMap::iterator i, iend;
00606             iend = mPriorityGroups.end();
00607             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00608             {
00609                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa7">resetOrganisationModes</a>();
00610             }
00611         }
00612         
<a name="l00619"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa11">00619</a>         <span class="keywordtype">void</span> addOrganisationMode(QueuedRenderableCollection::OrganisationMode om)
00620         {
00621             PriorityMap::iterator i, iend;
00622             iend = mPriorityGroups.end();
00623             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00624             {
00625                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa8">addOrganisationMode</a>(om);
00626             }
00627         }
00628 
<a name="l00635"></a><a class="code" href="classOgre_1_1RenderQueueGroup.html#Ogre_1_1RenderQueueGroupa12">00635</a>         <span class="keywordtype">void</span> defaultOrganisationMode(<span class="keywordtype">void</span>)
00636         {
00637             PriorityMap::iterator i, iend;
00638             iend = mPriorityGroups.end();
00639             <span class="keywordflow">for</span> (i = mPriorityGroups.begin(); i != iend; ++i)
00640             {
00641                 i-&gt;second-&gt;<a class="code" href="classOgre_1_1RenderPriorityGroup.html#Ogre_1_1RenderPriorityGroupa9">defaultOrganisationMode</a>();
00642             }
00643         }
00644 
00645     };
00646 
00647 
00648 
00649 }
00650 
00651 <span class="preprocessor">#endif</span>
00652 <span class="preprocessor"></span>
00653 
</pre></div><hr>
<p>
Copyright &copy; 2000-2005 by The OGRE Team<br />
<!--Creative Commons License--><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights20.png"/></a><br/>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 License</a>.<br/>
		<!--/Creative Commons License--><!-- <rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
		<Work rdf:about="">
			<license rdf:resource="http://creativecommons.org/licenses/by-sa/2.5/" />
	<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
		</Work>
		<License rdf:about="http://creativecommons.org/licenses/by-sa/2.5/"><permits rdf:resource="http://web.resource.org/cc/Reproduction"/><permits rdf:resource="http://web.resource.org/cc/Distribution"/><requires rdf:resource="http://web.resource.org/cc/Notice"/><requires rdf:resource="http://web.resource.org/cc/Attribution"/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/><requires rdf:resource="http://web.resource.org/cc/ShareAlike"/></License></rdf:RDF> -->

Last modified Sun Sep 30 10:50:57 2007
</p>
</body>
</html>
