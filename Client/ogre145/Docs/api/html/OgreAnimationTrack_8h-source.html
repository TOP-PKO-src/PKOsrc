<html>
<head>
<title>OGRE: OgreAnimationTrack.h Source File - OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="doxygen.css">
<link type="text/css" rel="stylesheet" href="tabs.css">
</head>

<body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">OgreMain</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>OgreAnimationTrack.h</h1><a href="OgreAnimationTrack_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">-----------------------------------------------------------------------------</span>
00003 <span class="comment">This source file is part of OGRE</span>
00004 <span class="comment">    (Object-oriented Graphics Rendering Engine)</span>
00005 <span class="comment">For the latest info, see http://www.ogre3d.org/</span>
00006 <span class="comment"></span>
00007 <span class="comment">Copyright (c) 2000-2006 Torus Knot Software Ltd</span>
00008 <span class="comment">Also see acknowledgements in Readme.html</span>
00009 <span class="comment"></span>
00010 <span class="comment">This program is free software; you can redistribute it and/or modify it under</span>
00011 <span class="comment">the terms of the GNU Lesser General Public License as published by the Free Software</span>
00012 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
00013 <span class="comment">version.</span>
00014 <span class="comment"></span>
00015 <span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
00016 <span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
00017 <span class="comment">FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</span>
00018 <span class="comment"></span>
00019 <span class="comment">You should have received a copy of the GNU Lesser General Public License along with</span>
00020 <span class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</span>
00021 <span class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</span>
00022 <span class="comment">http://www.gnu.org/copyleft/lesser.txt.</span>
00023 <span class="comment"></span>
00024 <span class="comment">You may alternatively use this source under the terms of a specific version of</span>
00025 <span class="comment">the OGRE Unrestricted License provided you have obtained such a license from</span>
00026 <span class="comment">Torus Knot Software Ltd.</span>
00027 <span class="comment">-----------------------------------------------------------------------------</span>
00028 <span class="comment">*/</span>
00029 
00030 <span class="preprocessor">#ifndef __AnimationTrack_H__</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define __AnimationTrack_H__</span>
00032 <span class="preprocessor"></span>
00033 <span class="preprocessor">#include "<a class="code" href="OgrePrerequisites_8h.html">OgrePrerequisites.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="OgreSimpleSpline_8h.html">OgreSimpleSpline.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="OgreRotationalSpline_8h.html">OgreRotationalSpline.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="OgreKeyFrame_8h.html">OgreKeyFrame.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="OgreAnimable_8h.html">OgreAnimable.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="OgrePose_8h.html">OgrePose.h</a>"</span>
00039 
00040 <span class="keyword">namespace </span>Ogre 
00041 {
<a name="l00044"></a><a class="code" href="classOgre_1_1TimeIndex.html">00044</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> TimeIndex
00045     {
00046     <span class="keyword">protected</span>:
<a name="l00049"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexp0">00049</a>         <a class="code" href="namespaceOgre.html#a351">Real</a> mTimePos;
<a name="l00055"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexp1">00055</a>         <a class="code" href="namespaceOgre.html#a354">uint</a> mKeyIndex;
00056 
<a name="l00059"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndext0">00059</a>         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#a354">uint</a> INVALID_KEY_INDEX = (<a class="code" href="namespaceOgre.html#a354">uint</a>)-1;
00060 
00061     <span class="keyword">public</span>:
<a name="l00064"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexa0">00064</a>         TimeIndex(Real timePos)
00065             : mTimePos(timePos)
00066             , mKeyIndex(INVALID_KEY_INDEX)
00067         {
00068         }
00069 
<a name="l00075"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexa1">00075</a>         TimeIndex(Real timePos, uint keyIndex)
00076             : mTimePos(timePos)
00077             , mKeyIndex(keyIndex)
00078         {
00079         }
00080 
<a name="l00081"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexa2">00081</a>         <span class="keywordtype">bool</span> hasKeyIndex(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00082 <span class="keyword">        </span>{
00083             <span class="keywordflow">return</span> mKeyIndex != INVALID_KEY_INDEX;
00084         }
00085 
<a name="l00086"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexa3">00086</a>         <a class="code" href="namespaceOgre.html#a351">Real</a> getTimePos(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00087 <span class="keyword">        </span>{
00088             <span class="keywordflow">return</span> mTimePos;
00089         }
00090 
<a name="l00091"></a><a class="code" href="classOgre_1_1TimeIndex.html#Ogre_1_1TimeIndexa4">00091</a>         <a class="code" href="namespaceOgre.html#a354">uint</a> getKeyIndex(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00092 <span class="keyword">        </span>{
00093             <span class="keywordflow">return</span> mKeyIndex;
00094         }
00095     };
00096 
<a name="l00116"></a><a class="code" href="classOgre_1_1AnimationTrack.html">00116</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> AnimationTrack
00117     {
00118     <span class="keyword">public</span>:
00120         AnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle);
00121 
00122         <span class="keyword">virtual</span> ~AnimationTrack();
00123 
<a name="l00125"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTracka17">00125</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> getHandle(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mHandle; }
00126 
00128         <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> getNumKeyFrames(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00129 
00131         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* getKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index) <span class="keyword">const</span>;
00132 
00154         <span class="keyword">virtual</span> <a class="code" href="namespaceOgre.html#a351">Real</a> getKeyFramesAtTime(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>** keyFrame1, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>** keyFrame2,
00155             <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>* firstKeyIndex = 0) <span class="keyword">const</span>;
00156 
00166         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* createKeyFrame(Real timePos);
00167 
00169         <span class="keyword">virtual</span> <span class="keywordtype">void</span> removeKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index);
00170 
00172         <span class="keyword">virtual</span> <span class="keywordtype">void</span> removeAllKeyFrames(<span class="keywordtype">void</span>);
00173 
00174 
00184         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getInterpolatedKeyFrame(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* kf) <span class="keyword">const </span>= 0;
00185 
00193         <span class="keyword">virtual</span> <span class="keywordtype">void</span> apply(<span class="keyword">const</span> TimeIndex&amp; timeIndex, Real weight = 1.0, Real scale = 1.0f) = 0;
00194 
<a name="l00197"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTracka24">00197</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> _keyFrameDataChanged(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{}
00198 
<a name="l00203"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1NumericAnimationTracka18">00203</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasNonZeroKeyFrames(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
00204 
<a name="l00206"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1NumericAnimationTracka19">00206</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> optimise(<span class="keywordtype">void</span>) {}
00207 
00209         <span class="keyword">virtual</span> <span class="keywordtype">void</span> _collectKeyFrameTimes(std::vector&lt;Real&gt;&amp; keyFrameTimes);
00210 
00213         <span class="keyword">virtual</span> <span class="keywordtype">void</span> _buildKeyFrameIndexMap(<span class="keyword">const</span> std::vector&lt;Real&gt;&amp; keyFrameTimes);
00214 
00215     <span class="keyword">protected</span>:
<a name="l00216"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackx0">00216</a>         <span class="keyword">typedef</span> std::vector&lt;KeyFrame*&gt; KeyFrameList;
<a name="l00217"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackp3">00217</a>         KeyFrameList mKeyFrames;
<a name="l00218"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackp4">00218</a>         <a class="code" href="classOgre_1_1Animation.html">Animation</a>* mParent;
<a name="l00219"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackp5">00219</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mHandle;
00220 
<a name="l00222"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackx1">00222</a>         <span class="keyword">typedef</span> std::vector&lt;ushort&gt; KeyFrameIndexMap;
<a name="l00223"></a><a class="code" href="classOgre_1_1AnimationTrack.html#Ogre_1_1VertexAnimationTrackp6">00223</a>         KeyFrameIndexMap mKeyFrameIndexMap;
00224 
00226         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* createKeyFrameImpl(Real time) = 0;
00227 
00229         <span class="keyword">virtual</span> <span class="keywordtype">void</span> populateClone(AnimationTrack* clone) <span class="keyword">const</span>;
00230         
00231 
00232 
00233     };
00234 
<a name="l00237"></a><a class="code" href="classOgre_1_1NumericAnimationTrack.html">00237</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> NumericAnimationTrack : <span class="keyword">public</span> AnimationTrack
00238     {
00239     <span class="keyword">public</span>:
00241         NumericAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle);
00243         NumericAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle, 
00244             <a class="code" href="classOgre_1_1SharedPtr.html">AnimableValuePtr</a>&amp; target);
00245 
00253         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1NumericKeyFrame.html">NumericKeyFrame</a>* createNumericKeyFrame(<a class="code" href="namespaceOgre.html#a351">Real</a> timePos);
00254 
00256         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getInterpolatedKeyFrame(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* kf) <span class="keyword">const</span>;
00257 
00259         <span class="keyword">virtual</span> <span class="keywordtype">void</span> apply(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="namespaceOgre.html#a351">Real</a> weight = 1.0, <a class="code" href="namespaceOgre.html#a351">Real</a> scale = 1.0f);
00260 
00269         <span class="keywordtype">void</span> applyToAnimable(<span class="keyword">const</span> <a class="code" href="classOgre_1_1SharedPtr.html">AnimableValuePtr</a>&amp; anim, <span class="keyword">const</span> TimeIndex&amp; timeIndex, 
00270             <a class="code" href="namespaceOgre.html#a351">Real</a> weight = 1.0, <a class="code" href="namespaceOgre.html#a351">Real</a> scale = 1.0f);
00271 
00273         <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classOgre_1_1SharedPtr.html">AnimableValuePtr</a>&amp; getAssociatedAnimable(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00274 
00277         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setAssociatedAnimable(<span class="keyword">const</span> <a class="code" href="classOgre_1_1SharedPtr.html">AnimableValuePtr</a>&amp; val);
00278 
00280         <a class="code" href="classOgre_1_1NumericKeyFrame.html">NumericKeyFrame</a>* getNumericKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index) <span class="keyword">const</span>;
00281 
00283         NumericAnimationTrack* _clone(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* newParent) <span class="keyword">const</span>;
00284 
00285 
00286     <span class="keyword">protected</span>:
<a name="l00288"></a><a class="code" href="classOgre_1_1NumericAnimationTrack.html#Ogre_1_1NumericAnimationTrackp0">00288</a>         <a class="code" href="classOgre_1_1SharedPtr.html">AnimableValuePtr</a> mTargetAnim;
00289 
00291         <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* createKeyFrameImpl(Real time);
00292 
00293 
00294     };
00295 
<a name="l00298"></a><a class="code" href="classOgre_1_1NodeAnimationTrack.html">00298</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> NodeAnimationTrack : <span class="keyword">public</span> AnimationTrack
00299     {
00300     <span class="keyword">public</span>:
00302         NodeAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle);
00304         NodeAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle, 
00305             <a class="code" href="classOgre_1_1Node.html">Node</a>* targetNode);
00307         <span class="keyword">virtual</span> ~NodeAnimationTrack();
00315         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1TransformKeyFrame.html">TransformKeyFrame</a>* createNodeKeyFrame(<a class="code" href="namespaceOgre.html#a351">Real</a> timePos);
00317         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1Node.html">Node</a>* getAssociatedNode(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00318 
00320         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setAssociatedNode(<a class="code" href="classOgre_1_1Node.html">Node</a>* node);
00321 
00323         <span class="keyword">virtual</span> <span class="keywordtype">void</span> applyToNode(<a class="code" href="classOgre_1_1Node.html">Node</a>* node, <span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="namespaceOgre.html#a351">Real</a> weight = 1.0, 
00324             <a class="code" href="namespaceOgre.html#a351">Real</a> scale = 1.0f);
00325 
00327         <span class="keyword">virtual</span> <span class="keywordtype">void</span> setUseShortestRotationPath(<span class="keywordtype">bool</span> useShortestPath);
00328 
00330         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> getUseShortestRotationPath() <span class="keyword">const</span>;
00331 
00333         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getInterpolatedKeyFrame(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* kf) <span class="keyword">const</span>;
00334 
00336         <span class="keyword">virtual</span> <span class="keywordtype">void</span> apply(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="namespaceOgre.html#a351">Real</a> weight = 1.0, <a class="code" href="namespaceOgre.html#a351">Real</a> scale = 1.0f);
00337 
00339         <span class="keywordtype">void</span> _keyFrameDataChanged(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00340 
00342         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1TransformKeyFrame.html">TransformKeyFrame</a>* getNodeKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index) <span class="keyword">const</span>;
00343 
00344 
00349         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasNonZeroKeyFrames(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00350 
00352         <span class="keyword">virtual</span> <span class="keywordtype">void</span> optimise(<span class="keywordtype">void</span>);
00353 
00355         NodeAnimationTrack* _clone(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* newParent) <span class="keyword">const</span>;
00356         
00357     <span class="keyword">protected</span>:
00359         <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* createKeyFrameImpl(<a class="code" href="namespaceOgre.html#a351">Real</a> time);
00360         <span class="comment">// Flag indicating we need to rebuild the splines next time</span>
00361         <span class="keyword">virtual</span> <span class="keywordtype">void</span> buildInterpolationSplines(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00362 
00363         <span class="comment">// Struct for store splines, allocate on demand for better memory footprint</span>
<a name="l00364"></a><a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html">00364</a>         <span class="keyword">struct </span><a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html">Splines</a>
00365         {
<a name="l00366"></a><a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html#Ogre_1_1NodeAnimationTrack_1_1Splineso0">00366</a>             <a class="code" href="classOgre_1_1SimpleSpline.html">SimpleSpline</a> positionSpline;
<a name="l00367"></a><a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html#Ogre_1_1NodeAnimationTrack_1_1Splineso1">00367</a>             <a class="code" href="classOgre_1_1SimpleSpline.html">SimpleSpline</a> scaleSpline;
<a name="l00368"></a><a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html#Ogre_1_1NodeAnimationTrack_1_1Splineso2">00368</a>             <a class="code" href="classOgre_1_1RotationalSpline.html">RotationalSpline</a> rotationSpline;
00369         };
00370 
<a name="l00371"></a><a class="code" href="classOgre_1_1NodeAnimationTrack.html#Ogre_1_1NodeAnimationTrackp0">00371</a>         <a class="code" href="classOgre_1_1Node.html">Node</a>* mTargetNode;
00372         <span class="comment">// Prebuilt splines, must be mutable since lazy-update in const method</span>
<a name="l00373"></a><a class="code" href="classOgre_1_1NodeAnimationTrack.html#Ogre_1_1NodeAnimationTrackp1">00373</a>         <span class="keyword">mutable</span> <a class="code" href="structOgre_1_1NodeAnimationTrack_1_1Splines.html">Splines</a>* mSplines;
<a name="l00374"></a><a class="code" href="classOgre_1_1NodeAnimationTrack.html#Ogre_1_1NodeAnimationTrackp2">00374</a>         <span class="keyword">mutable</span> <span class="keywordtype">bool</span> mSplineBuildNeeded;
<a name="l00376"></a><a class="code" href="classOgre_1_1NodeAnimationTrack.html#Ogre_1_1NodeAnimationTrackp3">00376</a>         <span class="keyword">mutable</span> <span class="keywordtype">bool</span> mUseShortestRotationPath ;
00377 
00378 
00379     };
00380 
<a name="l00439"></a><a class="code" href="namespaceOgre.html#a511">00439</a>     <span class="keyword">enum</span> <a class="code" href="namespaceOgre.html#a511">VertexAnimationType</a>
00440     {
00442         <a class="code" href="namespaceOgre.html#a511a6">VAT_NONE</a> = 0,
00444         <a class="code" href="namespaceOgre.html#a511a7">VAT_MORPH</a> = 1,
00446         <a class="code" href="namespaceOgre.html#a511a8">VAT_POSE</a> = 2
00447     };
00448 
<a name="l00452"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html">00452</a>     <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a16">_OgreExport</a> VertexAnimationTrack : <span class="keyword">public</span> AnimationTrack
00453     {
00454     <span class="keyword">public</span>:
<a name="l00456"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTrackw2">00456</a>         <span class="keyword">enum</span> TargetMode
00457         {
00459             TM_SOFTWARE, 
00462             TM_HARDWARE
00463         };
00465         VertexAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle, VertexAnimationType animType);
00467         VertexAnimationTrack(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* parent, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> handle, VertexAnimationType animType, 
00468             <a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* targetData, TargetMode target = TM_SOFTWARE);
00469 
<a name="l00471"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka2">00471</a>         <a class="code" href="namespaceOgre.html#a511">VertexAnimationType</a> getAnimationType(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mAnimationType; }
00472 
00480         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1VertexMorphKeyFrame.html">VertexMorphKeyFrame</a>* createVertexMorphKeyFrame(Real timePos);
00481 
00484         <span class="keyword">virtual</span> <a class="code" href="classOgre_1_1VertexPoseKeyFrame.html">VertexPoseKeyFrame</a>* createVertexPoseKeyFrame(Real timePos);
00485 
<a name="l00489"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka5">00489</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getInterpolatedKeyFrame(<span class="keyword">const</span> TimeIndex&amp; timeIndex, <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* kf)<span class="keyword"> const </span>{}
00490 
00492         <span class="keyword">virtual</span> <span class="keywordtype">void</span> apply(<span class="keyword">const</span> TimeIndex&amp; timeIndex, Real weight = 1.0, Real scale = 1.0f);
00493 
00496         <span class="keyword">virtual</span> <span class="keywordtype">void</span> applyToVertexData(<a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* data, 
00497             <span class="keyword">const</span> TimeIndex&amp; timeIndex, Real weight = 1.0, 
00498             <span class="keyword">const</span> PoseList* poseList = 0);
00499 
00500 
00502         <a class="code" href="classOgre_1_1VertexMorphKeyFrame.html">VertexMorphKeyFrame</a>* getVertexMorphKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index) <span class="keyword">const</span>;
00503 
00505         <a class="code" href="classOgre_1_1VertexPoseKeyFrame.html">VertexPoseKeyFrame</a>* getVertexPoseKeyFrame(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index) <span class="keyword">const</span>;
00506 
<a name="l00508"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka10">00508</a>         <span class="keywordtype">void</span> setAssociatedVertexData(<a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* data) { mTargetVertexData = data; }
<a name="l00510"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka11">00510</a>         <a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* getAssociatedVertexData(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mTargetVertexData; }
00511 
<a name="l00513"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka12">00513</a>         <span class="keywordtype">void</span> setTargetMode(TargetMode m) { mTargetMode = m; }
<a name="l00515"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTracka13">00515</a>         TargetMode getTargetMode(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mTargetMode; }
00516 
00521         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasNonZeroKeyFrames(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00522 
00524         <span class="keyword">virtual</span> <span class="keywordtype">void</span> optimise(<span class="keywordtype">void</span>);
00525 
00527         VertexAnimationTrack* _clone(<a class="code" href="classOgre_1_1Animation.html">Animation</a>* newParent) <span class="keyword">const</span>;
00528 
00529     <span class="keyword">protected</span>:
<a name="l00531"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTrackp0">00531</a>         <a class="code" href="namespaceOgre.html#a511">VertexAnimationType</a> mAnimationType;
<a name="l00533"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTrackp1">00533</a>         <a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* mTargetVertexData;
<a name="l00535"></a><a class="code" href="classOgre_1_1VertexAnimationTrack.html#Ogre_1_1VertexAnimationTrackp2">00535</a>         TargetMode mTargetMode;
00536 
00538         <a class="code" href="classOgre_1_1KeyFrame.html">KeyFrame</a>* createKeyFrameImpl(Real time);
00539 
00541         <span class="keywordtype">void</span> applyPoseToVertexData(<span class="keyword">const</span> <a class="code" href="classOgre_1_1Pose.html">Pose</a>* pose, <a class="code" href="classOgre_1_1VertexData.html">VertexData</a>* data, Real influence);
00542 
00543 
00544     };
00545 
00546 
00547 }
00548 
00549 <span class="preprocessor">#endif</span>
</pre></div><hr>
<p>
Copyright &copy; 2000-2005 by The OGRE Team<br />
<!--Creative Commons License--><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights20.png"/></a><br/>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike 2.5 License</a>.<br/>
		<!--/Creative Commons License--><!-- <rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
		<Work rdf:about="">
			<license rdf:resource="http://creativecommons.org/licenses/by-sa/2.5/" />
	<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
		</Work>
		<License rdf:about="http://creativecommons.org/licenses/by-sa/2.5/"><permits rdf:resource="http://web.resource.org/cc/Reproduction"/><permits rdf:resource="http://web.resource.org/cc/Distribution"/><requires rdf:resource="http://web.resource.org/cc/Notice"/><requires rdf:resource="http://web.resource.org/cc/Attribution"/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/><requires rdf:resource="http://web.resource.org/cc/ShareAlike"/></License></rdf:RDF> -->

Last modified Sun Sep 30 10:50:56 2007
</p>
</body>
</html>
